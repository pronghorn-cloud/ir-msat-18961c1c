import{_ as N,o as R,a as l,c as a,b as e,f as k,v as j,j as B,k as C,F as w,r as S,g as _,t as n,e as D,d as o,l as K}from"./index-DxPLqLYP.js";const Y={class:"decisions-page"},E={class:"search-panel"},G={class:"search-row"},O={class:"search-box"},Q={class:"filter-row"},$={class:"filter-group"},q=["value"],z={class:"filter-group"},H=["value"],J={class:"filter-group"},W=["value"],X={key:0,class:"filter-actions"},Z={key:0,class:"results-bar"},ee={class:"results-count"},se={key:0,class:"search-time"},te={class:"table-container"},le={class:"decisions-table"},ae={key:0},ne={key:1},oe={class:"order-num"},ue={class:"date-col"},ie={class:"keyword-col"},re={class:"keyword-text"},ce={key:0,class:"leave-badge"},de={key:0,class:"issue-badge"},ve={key:1},pe=["href"],_e={key:1,class:"no-doc"},fe={key:1,class:"pagination"},he=["disabled"],ye={class:"page-info"},be=["disabled"],me={__name:"PublicDecisions",setup(ge){const b=o([]),m=o(!0),r=o(0),c=o(20),u=o(0),x=o(0),f=o(""),g=o(""),d=o(""),v=o(""),p=o(""),F=o([]),P=o([]),T=o([]),A=K(()=>f.value||d.value||v.value||p.value);async function V(){try{const[i,s,t]=await Promise.all([D.get("/public/decisions/settlements"),D.get("/public/decisions/issue-types"),D.get("/public/decisions/years")]);i.success&&(F.value=i.data),s.success&&(P.value=s.data),t.success&&(T.value=t.data)}catch{}}async function h(){m.value=!0;const i=Date.now();try{const s=new URLSearchParams;s.set("limit",c.value),s.set("offset",u.value),g.value&&s.set("search",g.value),d.value&&s.set("settlement",d.value),v.value&&s.set("issue_type",v.value),p.value&&s.set("year",p.value);const t=await D.get(`/public/decisions?${s.toString()}`);t.success&&(b.value=t.data,r.value=t.total)}catch{b.value=[]}finally{x.value=Date.now()-i,m.value=!1}}function y(){g.value=f.value,u.value=0,h()}function M(){f.value="",g.value="",d.value="",v.value="",p.value="",u.value=0,h()}function L(){u.value=Math.max(0,u.value-c.value),h()}function U(){u.value=u.value+c.value,h()}function I(i){return i?new Date(i).toLocaleDateString("en-CA"):"—"}return R(()=>{V(),h()}),(i,s)=>(l(),a("div",Y,[s[13]||(s[13]=e("header",{class:"page-header"},[e("h1",null,"Published Decisions"),e("p",null,"Search and browse MSAT tribunal decisions and orders")],-1)),e("div",E,[e("div",G,[e("div",O,[k(e("input",{type:"text",class:"search-input","onUpdate:modelValue":s[0]||(s[0]=t=>f.value=t),placeholder:"Search by keyword, subject, settlement...",onKeyup:B(y,["enter"])},null,544),[[j,f.value]]),e("button",{class:"search-btn",onClick:y},"Search")])]),e("div",Q,[e("div",$,[s[5]||(s[5]=e("label",null,"Settlement",-1)),k(e("select",{class:"filter-input","onUpdate:modelValue":s[1]||(s[1]=t=>d.value=t),onChange:y},[s[4]||(s[4]=e("option",{value:""},"All Settlements",-1)),(l(!0),a(w,null,S(F.value,t=>(l(),a("option",{key:t,value:t},n(t),9,q))),128))],544),[[C,d.value]])]),e("div",z,[s[7]||(s[7]=e("label",null,"Issue Type",-1)),k(e("select",{class:"filter-input","onUpdate:modelValue":s[2]||(s[2]=t=>v.value=t),onChange:y},[s[6]||(s[6]=e("option",{value:""},"All Issue Types",-1)),(l(!0),a(w,null,S(P.value,t=>(l(),a("option",{key:t,value:t},n(t),9,H))),128))],544),[[C,v.value]])]),e("div",J,[s[9]||(s[9]=e("label",null,"Year",-1)),k(e("select",{class:"filter-input","onUpdate:modelValue":s[3]||(s[3]=t=>p.value=t),onChange:y},[s[8]||(s[8]=e("option",{value:""},"All Years",-1)),(l(!0),a(w,null,S(T.value,t=>(l(),a("option",{key:t,value:t},n(t),9,W))),128))],544),[[C,p.value]])]),A.value?(l(),a("div",X,[e("button",{class:"clear-btn",onClick:M},"Clear Filters")])):_("",!0)])]),m.value?_("",!0):(l(),a("div",Z,[e("span",ee,n(r.value)+" decision"+n(r.value!==1?"s":"")+" found",1),x.value>0?(l(),a("span",se,"("+n(x.value)+"ms)",1)):_("",!0)])),e("div",te,[e("table",le,[s[12]||(s[12]=e("thead",null,[e("tr",null,[e("th",null,"Order #"),e("th",null,"Date"),e("th",null,"Subject / Keywords"),e("th",null,"Settlement"),e("th",null,"Issue Type"),e("th",null,"View")])],-1)),e("tbody",null,[m.value?(l(),a("tr",ae,[...s[10]||(s[10]=[e("td",{colspan:"6",class:"center-text"},"Loading decisions...",-1)])])):b.value.length===0?(l(),a("tr",ne,[...s[11]||(s[11]=[e("td",{colspan:"6",class:"center-text"},"No decisions found",-1)])])):_("",!0),(l(!0),a(w,null,S(b.value,t=>(l(),a("tr",{key:t.id},[e("td",oe,n(t.order_number),1),e("td",ue,n(I(t.issue_date)),1),e("td",ie,[e("span",re,n(t.keyword||"—"),1),t.app_for_leave?(l(),a("div",ce," App for Leave"+n(t.leave_granted?" (Granted)":""),1)):_("",!0)]),e("td",null,n(t.settlement_name||"—"),1),e("td",null,[t.issue_type?(l(),a("span",de,n(t.issue_type),1)):(l(),a("span",ve,"—"))]),e("td",null,[t.document_url?(l(),a("a",{key:0,href:t.document_url,target:"_blank",rel:"noopener",class:"pdf-link"}," PDF ",8,pe)):(l(),a("span",_e,"—"))])]))),128))])])]),r.value>c.value?(l(),a("div",fe,[e("button",{class:"page-btn",disabled:u.value===0,onClick:L},"Previous",8,he),e("span",ye," Showing "+n(u.value+1)+"–"+n(Math.min(u.value+c.value,r.value))+" of "+n(r.value),1),e("button",{class:"page-btn",disabled:u.value+c.value>=r.value,onClick:U},"Next",8,be)])):_("",!0)]))}},we=N(me,[["__scopeId","data-v-dc70b38e"]]);export{we as default};
//# sourceMappingURL=PublicDecisions-C4SuWnW-.js.map
