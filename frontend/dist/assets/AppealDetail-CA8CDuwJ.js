import{_ as kt,d as c,o as wt,a as l,c as n,b as t,t as o,F as y,r as $,n as F,g as i,p as _,f as v,v as g,k as K,m as T,w as ge,N as $t,O as Ct,e as h,l as ue,P as St}from"./index-DxPLqLYP.js";const Dt={class:"appeal-detail"},Pt={key:0,class:"loading-state"},Ut={key:1,class:"error-state"},xt={type:"emergency",heading:"Error"},Ft={class:"page-header"},zt={class:"header-row"},At={class:"status-bar"},Lt={class:"status-item"},Vt={key:0,class:"inline-edit"},Tt=["value"],Ot=["value"],Mt={class:"status-item"},Nt={key:0,class:"inline-edit"},jt=["value"],Rt=["value"],It={class:"stage-value"},Bt={class:"status-item"},Et={class:"status-item"},Ht={class:"tabs-container"},qt={class:"tab-nav"},Gt=["onClick"],Kt={key:0,class:"tab-count"},Yt={class:"tab-content"},Qt={key:0,class:"tab-panel"},Jt={class:"info-grid"},Xt={class:"info-item"},Wt={class:"info-value file-number"},Zt={class:"info-item"},es={class:"info-value"},ts={class:"info-item"},ss={class:"info-value"},as={class:"info-item"},ls={class:"info-value"},ns={class:"info-item"},os={class:"info-value"},is={class:"info-item"},ds={class:"info-value"},us={key:0,class:"info-item"},rs={class:"info-value"},cs={key:1,class:"info-item"},ps={class:"info-value"},vs={key:2,class:"info-item"},ms={class:"info-value"},_s={key:3,class:"info-item"},fs={class:"info-value"},ys={key:4,class:"info-item"},gs={class:"info-value"},bs={key:0,class:"text-block"},hs={key:1,class:"text-block"},ks={key:2,class:"text-block"},ws={class:"mediation-section"},$s={class:"schedule-mediation-form"},Cs={class:"mediation-form-grid"},Ss={class:"med-field"},Ds={class:"med-field"},Ps={class:"med-field"},Us={class:"med-field"},xs={class:"med-field med-notes"},Fs={class:"med-field med-submit"},zs=["disabled"],As={key:0,class:"empty-state-inline"},Ls={key:1,class:"mediation-list"},Vs={class:"mediation-card-header"},Ts={class:"mediation-date-label"},Os={key:0,class:"mediation-time"},Ms={class:"mediation-card-body"},Ns={key:0},js={key:1,class:"private-badge"},Rs={key:2,class:"mediation-notes"},Is={key:0,class:"mediation-card-actions"},Bs=["on_click"],Es=["on_click"],Hs=["on_click"],qs={class:"mediation-section"},Gs={class:"schedule-mediation-form"},Ks={class:"mediation-form-grid"},Ys={class:"med-field"},Qs={class:"med-field"},Js={class:"med-field"},Xs={class:"med-field"},Ws={class:"med-field med-notes"},Zs={class:"med-field med-submit"},ea=["disabled"],ta={key:0,class:"empty-state-inline"},sa={key:1,class:"mediation-list"},aa={class:"mediation-card-header"},la={class:"mediation-date-label"},na={key:0,class:"mediation-time"},oa={class:"mediation-card-body"},ia={key:0},da={key:1,class:"private-badge"},ua={key:2,class:"mediation-notes"},ra={key:0,class:"mediation-card-actions"},ca=["on_click"],pa=["on_click"],va=["on_click"],ma={class:"mediation-section"},_a={class:"schedule-mediation-form"},fa={class:"order-form-grid"},ya={class:"med-field"},ga={class:"med-field"},ba={class:"med-field"},ha={class:"med-field"},ka={class:"med-field"},wa={class:"checkbox-label"},$a={class:"med-field"},Ca={class:"checkbox-label"},Sa={class:"order-subjects-row"},Da={class:"checkbox-label"},Pa={class:"checkbox-label"},Ua={class:"checkbox-label"},xa={class:"checkbox-label"},Fa={class:"checkbox-label"},za={class:"checkbox-label"},Aa={class:"order-submit-row"},La=["disabled"],Va={key:0,class:"empty-state-inline"},Ta={key:1,class:"mediation-list"},Oa={class:"mediation-card-header"},Ma={class:"order-number-badge"},Na={class:"mediation-date-label"},ja={key:0,class:"private-badge"},Ra={key:1,class:"public-badge"},Ia={class:"mediation-card-body"},Ba={key:0},Ea={key:1,class:"mediation-notes"},Ha={class:"order-card-meta"},qa={key:0,class:"order-flag-badge"},Ga={key:1,class:"order-flag-badge leave-granted"},Ka={key:1,class:"tab-panel"},Ya={class:"add-party-form"},Qa={class:"party-source-toggle"},Ja={key:0,class:"add-party-row"},Xa={class:"search-container"},Wa={key:0,class:"search-results"},Za={key:0,class:"search-item search-loading"},el={key:1,class:"search-item search-empty"},tl=["onMousedown"],sl={class:"search-name"},al={class:"search-meta"},ll={key:1,class:"selected-client"},nl={key:2,class:"inline-create-link"},ol={class:"party-type-select"},il={class:"add-party-action"},dl=["disabled"],ul={key:1,class:"inline-create-form"},rl={class:"inline-create-grid"},cl={class:"ic-field"},pl={class:"ic-field"},vl={class:"ic-field"},ml={class:"ic-field"},_l={class:"ic-field"},fl={class:"inline-create-actions"},yl=["disabled"],gl={key:2,class:"add-party-row"},bl={class:"search-container"},hl={key:0,class:"search-results"},kl={key:0,class:"search-item search-loading"},wl={key:1,class:"search-item search-empty"},$l=["onMousedown"],Cl={class:"search-name"},Sl={class:"search-meta"},Dl={key:1,class:"selected-client selected-org"},Pl={class:"party-type-select"},Ul={class:"add-party-action"},xl=["disabled"],Fl={key:0,class:"empty-state"},zl={key:1,class:"data-table"},Al={key:0},Ll={key:1,class:"org-party-name"},Vl={key:2,class:"muted"},Tl={key:0},Ol={key:1},Ml={key:2,class:"muted"},Nl={key:0},jl={key:1,class:"muted"},Rl=["on_click"],Il={key:2,class:"tab-panel"},Bl={key:0,class:"empty-state"},El={key:1,class:"timeline"},Hl={class:"timeline-content"},ql={class:"timeline-header"},Gl={class:"timeline-action"},Kl={class:"timeline-date"},Yl={key:0,class:"timeline-meta"},Ql={key:1,class:"timeline-details"},Jl={key:2,class:"timeline-details"},Xl={key:3,class:"tab-panel"},Wl={class:"assign-panel-form"},Zl={class:"panel-form-grid"},en={class:"panel-field"},tn={class:"panel-field"},sn={class:"panel-field"},an={class:"panel-field"},ln={class:"panel-field"},nn={class:"panel-field panel-submit"},on=["disabled"],dn={id:"board-member-list"},un=["value"],rn={key:0,class:"empty-state"},cn={key:1},pn={class:"panel-header"},vn={key:0},mn={key:1,class:"muted"},_n={class:"panel-members"},fn={class:"panel-member"},yn={class:"member-name"},gn={class:"panel-member"},bn={class:"member-name"},hn={key:0,class:"panel-member"},kn={class:"member-name"},wn={key:1,class:"panel-member"},$n={class:"member-name"},Cn={key:4,class:"tab-panel"},Sn={class:"doc-actions-bar"},Dn={key:0,class:"doc-upload-form"},Pn={class:"doc-upload-grid"},Un={class:"doc-field doc-file-field"},xn={class:"file-input-wrapper"},Fn={key:0,class:"selected-file-info"},zn={class:"doc-field"},An=["value"],Ln={class:"doc-field"},Vn={key:0,class:"upload-progress"},Tn={class:"doc-upload-actions"},On=["disabled"],Mn={key:2,class:"empty-state"},Nn={key:3,class:"data-table"},jn={class:"doc-name"},Rn={class:"doc-type-badge"},In={class:"doc-actions-cell"},Bn=["onClick"],En=["onClick"],Hn={class:"doc-confirm-dialog"},qn={class:"doc-confirm-actions"},Gn={class:"hp-section"},Kn={class:"hp-section-header"},Yn={key:0,class:"hp-compile-form"},Qn={class:"hp-form-field"},Jn=["placeholder"],Xn={class:"hp-doc-select"},Wn={class:"hp-doc-checkboxes"},Zn=["value"],eo={class:"hp-doc-check-name"},to={class:"hp-doc-check-meta"},so={class:"hp-select-actions"},ao={class:"hp-selected-count"},lo={class:"hp-compile-actions"},no=["disabled"],oo={key:1,class:"empty-state-inline"},io={key:2,class:"hp-list"},uo=["onClick"],ro={class:"hp-card-info"},co={class:"hp-card-name"},po={class:"hp-card-meta"},vo={class:"hp-card-right"},mo={class:"hp-status-badge"},_o={class:"hp-doc-count"},fo={key:0,class:"hp-card-body"},yo={key:0,class:"hp-loading"},go={key:1,class:"hp-docs-table"},bo={class:"doc-type-badge"},ho={key:2,class:"hp-loading"},ko={key:5,class:"tab-panel"},wo={key:0,class:"empty-state"},$o={key:1,class:"notes-section"},Co={class:"notes-content"},So={key:2,class:"notes-section"},Do={class:"correspondence-header"},Po={class:"correspondence-subject"},Uo={class:"correspondence-date"},xo={key:0,class:"correspondence-meta"},Fo={key:1,class:"correspondence-meta"},zo={key:2,class:"correspondence-body"},Ao={__name:"AppealDetail",setup(Lo){const S=St(),p=c(null),re=c([]),ce=c([]),z=c([]),xe=c([]),J=c([]),pe=c([]),be=c([]),he=c(!0),ke=c(""),O=c("overview"),ve=c(!1),me=c(!1),Fe=c([]),ze=c([]),_e=c(""),Ae=c(!1),I=c("client"),M=c(""),B=c([]),X=c(!1),W=c(!1),x=c(null),N=c("Applicant");let Le=null;const j=c(""),E=c([]),Z=c(!1),ee=c(!1),A=c(null);let Ve=null;const te=c(!1),D=c({first_name:"",last_name:"",email:"",phone_cell:"",settlement:""}),Y=c(!1),R=c(null),we=c(null),se=c(""),ae=c(""),le=c(!1),H=c(0),fe=c(""),Te=c(!1),L=c(null),Be=["Filing","Submission","Evidence","Decision","Order","Correspondence","Hearing Package","Other"],ye=c([]),Q=c(!1),V=c([]),ne=c(""),oe=c(!1),ie=c(null),de=c([]),$e=c(!1),Ce=c({users:[],known_names:[]}),b=c({panel_chair:"",panel_member_2:"",panel_member_3:"",mediator:"",date_assigned:new Date().toISOString().split("T")[0]}),k=c({hearing_date:"",hearing_time:"",location:"",notes:"",is_public:!0}),Oe=ue(()=>pe.value.filter(a=>a.hearing_type==="Mediation").sort((a,e)=>new Date(e.hearing_date)-new Date(a.hearing_date))),w=c({hearing_date:"",hearing_time:"",location:"",notes:"",is_public:!0}),Me=ue(()=>pe.value.filter(a=>a.hearing_type==="Oral").sort((a,e)=>new Date(e.hearing_date)-new Date(a.hearing_date))),m=c({issue_date:"",hearing_date:"",keyword:"",app_for_leave:!1,leave_granted:!1,is_public:!0,subjects:{land:!1,membership:!1,compensation:!1,descent_of_property:!1,pmt_cancellations:!1,trespass:!1}});function Ee(a){const e=[];return a.land&&e.push("Land"),a.membership&&e.push("Membership"),a.compensation&&e.push("Compensation"),a.descent_of_property&&e.push("Descent of Property"),a.pmt_cancellations&&e.push("PMT Cancellations"),a.trespass&&e.push("Trespass"),e}const He=ue(()=>{const a=new Set;for(const e of Ce.value.users)a.add(`${e.first_name} ${e.last_name}`);for(const e of Ce.value.known_names)a.add(e);return[...a].sort()}),Se=ue(()=>{const a=[];for(const e of xe.value)a.push({id:e.id,action:e.action,details:e.details,performed_by:e.performed_by,created_at:e.created_at,type:"audit"});for(const e of pe.value)a.push({id:"hearing-"+e.id,action:`${e.hearing_type||"Oral"} Hearing${e.is_public?" (Public)":""}`,date:e.hearing_date,created_at:e.hearing_date,location:e.location,type:"hearing"});return a.sort((e,d)=>new Date(d.created_at)-new Date(e.created_at)),a}),qe=ue(()=>{var a;return[{key:"overview",label:"Overview"},{key:"parties",label:"Parties",count:re.value.length},{key:"timeline",label:"Timeline",count:Se.value.length},{key:"panel",label:"Panel",count:ce.value.length},{key:"documents",label:"Documents",count:z.value.length},{key:"notes",label:"Notes",count:((a=p.value)!=null&&a.notes?1:0)+J.value.length}]});function U(a){return a?new Date(a).toLocaleDateString():"—"}function Ne(a){return a?new Date(a).toLocaleString():"—"}function Ge(a){return a?a.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()):"—"}function Ke(a){if(!a)return"";if(typeof a=="string")return a;const e=[];return a.old_status&&a.new_status&&e.push(`${a.old_status} → ${a.new_status}`),a.old_stage&&a.new_stage&&e.push(`Stage ${a.old_stage} → ${a.new_stage}`),a.file_number&&e.push(`File: ${a.file_number}`),a.settlement&&e.push(`Settlement: ${a.settlement}`),a.issue_type&&e.push(`Issue: ${a.issue_type}`),a.appellant&&e.push(`Appellant: ${a.appellant}`),a.party_name&&e.push(`${a.party_name} (${a.party_type||""})`),a.panel_chair&&e.push(`Chair: ${a.panel_chair}`),a.panel_member_2&&e.push(`Member: ${a.panel_member_2}`),a.panel_member_3&&e.push(`Member: ${a.panel_member_3}`),a.mediator&&e.push(`Mediator: ${a.mediator}`),a.hearing_date&&!a.panel_chair&&e.push(`Date: ${new Date(a.hearing_date).toLocaleDateString()}`),a.location&&!a.panel_chair&&e.push(`Location: ${a.location}`),a.stage_updated&&e.push(`Stage: ${a.stage_updated}`),a.outcome&&e.push(`Outcome: ${a.outcome}`),a.order_number&&e.push(`Order #${a.order_number}`),a.status_updated&&e.push(`Status: ${a.status_updated}`),a.name&&a.document_count&&e.push(`${a.name} (${a.document_count} docs)`),a.file_name&&!a.name&&e.push(`File: ${a.file_name}`),a.category&&!a.file_number&&e.push(`Category: ${a.category}`),e.join(" | ")}function De(a){return a<1024?a+" B":a<1048576?(a/1024).toFixed(1)+" KB":(a/1048576).toFixed(1)+" MB"}function Ye(a){const e=a.target.files[0];e&&(R.value=e)}function q(a,e=!1){fe.value=a,Te.value=e,setTimeout(()=>{fe.value=""},4e3)}async function Qe(){if(!R.value||le.value)return;const a=new FormData;a.append("file",R.value),se.value&&a.append("category",se.value),ae.value&&a.append("description",ae.value),le.value=!0,H.value=0;try{const e=localStorage.getItem("msat_token"),d=h.defaults.baseURL,u=new XMLHttpRequest;u.open("POST",`${d}/appeals/${S.params.id}/documents`),u.setRequestHeader("Authorization",`Bearer ${e}`),u.upload.addEventListener("progress",r=>{r.lengthComputable&&(H.value=Math.round(r.loaded/r.total*100))});const s=await new Promise((r,C)=>{u.onload=()=>{const G=JSON.parse(u.responseText);u.status>=200&&u.status<300?r(G):C(G)},u.onerror=()=>C({message:"Upload failed"}),u.send(a)});q(s.message),je(),await P()}catch(e){q(e.message||"Failed to upload document",!0)}finally{le.value=!1,H.value=0}}function je(){Y.value=!1,R.value=null,se.value="",ae.value="",we.value&&(we.value.value="")}async function Je(a){try{const e=localStorage.getItem("msat_token"),d=h.defaults.baseURL,u=await fetch(`${d}/appeals/${S.params.id}/documents/${a.id}/download`,{headers:{Authorization:`Bearer ${e}`}});if(!u.ok)throw new Error("Download failed");const s=await u.blob(),r=window.URL.createObjectURL(s),C=document.createElement("a");C.href=r,C.download=a.original_name||a.file_name,document.body.appendChild(C),C.click(),document.body.removeChild(C),window.URL.revokeObjectURL(r)}catch{q("Failed to download document",!0)}}function Xe(a){L.value=a}async function We(){var e,d;if(!L.value)return;const a=L.value;try{const u=await h.delete(`/appeals/${S.params.id}/documents/${a.id}`);u.success&&(q(u.message),L.value=null,await P())}catch(u){q(((d=(e=u.response)==null?void 0:e.data)==null?void 0:d.message)||"Failed to delete document",!0)}}async function Ze(){var a,e;if(!(V.value.length===0||oe.value)){oe.value=!0;try{const d={document_ids:V.value};ne.value.trim()&&(d.name=ne.value.trim());const u=await h.post(`/appeals/${S.params.id}/hearing-packages`,d);u.success&&(q(u.message),Q.value=!1,V.value=[],ne.value="",await P())}catch(d){q(((e=(a=d.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to compile hearing package",!0)}finally{oe.value=!1}}}async function et(a){if(ie.value===a.id){ie.value=null,de.value=[];return}ie.value=a.id,$e.value=!0;try{const e=await h.get(`/appeals/${S.params.id}/hearing-packages/${a.id}`);e.success&&(de.value=e.documents||[])}catch{de.value=[]}finally{$e.value=!1}}async function P(){var a,e;he.value=!0;try{const d=await h.get(`/appeals/${S.params.id}`);d.success&&(p.value=d.appeal,re.value=d.parties||[],ce.value=d.panel||[],z.value=d.documents||[],xe.value=d.timeline||[],J.value=d.correspondence||[],pe.value=d.hearings||[],be.value=d.orders||[],ye.value=d.hearing_packages||[])}catch(d){ke.value=((e=(a=d.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to load appeal"}finally{he.value=!1}}async function tt(){try{const[a,e]=await Promise.all([h.get("/lookups/appeal-statuses"),h.get("/lookups/appeal-stages")]);a.success&&(Fe.value=a.data),e.success&&(ze.value=e.data)}catch{}}function st(){ve.value=!0}function at(){me.value=!0}function f(a,e=!1){_e.value=a,Ae.value=e,setTimeout(()=>{_e.value=""},3e3)}async function lt(a){var d,u;const e=a.target.value;if(ve.value=!1,e!==p.value.status)try{(await h.patch(`/appeals/${S.params.id}/status`,{status:e})).success&&(f(`Status updated to "${e}"`),await P())}catch(s){f(((u=(d=s.response)==null?void 0:d.data)==null?void 0:u.message)||"Failed to update status",!0)}}async function nt(a){var d,u;const e=a.target.value;if(me.value=!1,e!==p.value.stage)try{(await h.patch(`/appeals/${S.params.id}/stage`,{stage:e})).success&&(f(`Stage updated to "${e}"`),await P())}catch(s){f(((u=(d=s.response)==null?void 0:d.data)==null?void 0:u.message)||"Failed to update stage",!0)}}function ot(){setTimeout(()=>{W.value=!1},200)}function it(){if(W.value=!0,x.value=null,clearTimeout(Le),M.value.trim().length<2){B.value=[];return}X.value=!0,Le=setTimeout(async()=>{try{const a=await h.get(`/clients/search?q=${encodeURIComponent(M.value.trim())}`);a.success&&(B.value=a.data)}catch{B.value=[]}finally{X.value=!1}},300)}function dt(a){x.value=a,M.value="",B.value=[],W.value=!1}function Re(){x.value=null,M.value=""}async function ut(){var a,e;if(x.value)try{const d=await h.post(`/appeals/${S.params.id}/parties`,{client_id:x.value.id,party_type:N.value});d.success&&(f(d.message),Re(),N.value="Applicant",await P())}catch(d){f(((e=(a=d.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to add party",!0)}}async function rt(a,e){var d,u;if(confirm(`Remove ${e||"this party"} from the appeal?`))try{const s=await h.delete(`/appeals/${S.params.id}/parties/${a}`);s.success&&(f(s.message),await P())}catch(s){f(((u=(d=s.response)==null?void 0:d.data)==null?void 0:u.message)||"Failed to remove party",!0)}}function ct(){setTimeout(()=>{ee.value=!1},200)}function pt(){if(ee.value=!0,A.value=null,clearTimeout(Ve),j.value.trim().length<2){E.value=[];return}Z.value=!0,Ve=setTimeout(async()=>{try{const a=await h.get(`/organizations/search?q=${encodeURIComponent(j.value.trim())}`);a.success&&(E.value=a.data)}catch{E.value=[]}finally{Z.value=!1}},300)}function vt(a){A.value=a,j.value="",E.value=[],ee.value=!1}function Ie(){A.value=null,j.value=""}async function mt(){var a,e;if(A.value)try{const d=await h.post(`/appeals/${S.params.id}/parties`,{organization_id:A.value.id,party_type:N.value});d.success&&(f(d.message),Ie(),N.value="Applicant",await P())}catch(d){f(((e=(a=d.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to add organization party",!0)}}async function _t(){var a,e,d,u;if(!(!((a=D.value.first_name)!=null&&a.trim())||!((e=D.value.last_name)!=null&&e.trim())))try{const s={};for(const[C,G]of Object.entries(D.value))G!=null&&G.trim()&&(s[C]=G.trim());const r=await h.post("/clients",s);r.success&&(f(`Client ${r.client.first_name} ${r.client.last_name} created`),x.value=r.client,te.value=!1,D.value={first_name:"",last_name:"",email:"",phone_cell:"",settlement:""})}catch(s){f(((u=(d=s.response)==null?void 0:d.data)==null?void 0:u.message)||"Failed to create client",!0)}}async function ft(){try{const a=await h.get("/lookups/board-members");a.success&&(Ce.value=a.data)}catch{}}async function yt(){var a,e,d,u;if(!(!b.value.panel_chair||!b.value.panel_member_2))try{const s={panel_chair:b.value.panel_chair.trim(),panel_member_2:b.value.panel_member_2.trim()};(a=b.value.panel_member_3)!=null&&a.trim()&&(s.panel_member_3=b.value.panel_member_3.trim()),(e=b.value.mediator)!=null&&e.trim()&&(s.mediator=b.value.mediator.trim()),b.value.date_assigned&&(s.date_assigned=b.value.date_assigned);const r=await h.post(`/appeals/${S.params.id}/panel`,s);r.success&&(f(r.message),b.value={panel_chair:"",panel_member_2:"",panel_member_3:"",mediator:"",date_assigned:new Date().toISOString().split("T")[0]},await P())}catch(s){f(((u=(d=s.response)==null?void 0:d.data)==null?void 0:u.message)||"Failed to assign panel",!0)}}async function gt(){var a,e,d,u;if(k.value.hearing_date)try{const s={hearing_date:k.value.hearing_date};k.value.hearing_time&&(s.hearing_time=k.value.hearing_time),(a=k.value.location)!=null&&a.trim()&&(s.location=k.value.location.trim()),(e=k.value.notes)!=null&&e.trim()&&(s.notes=k.value.notes.trim()),s.is_public=k.value.is_public;const r=await h.post(`/appeals/${S.params.id}/mediation`,s);r.success&&(f(r.message),k.value={hearing_date:"",hearing_time:"",location:"",notes:"",is_public:!0},await P())}catch(s){f(((u=(d=s.response)==null?void 0:d.data)==null?void 0:u.message)||"Failed to schedule mediation",!0)}}async function Pe(a,e){var d,u;try{const s=await h.patch(`/appeals/${S.params.id}/mediation/${a}`,{outcome:e});s.success&&(f(s.message),await P())}catch(s){f(((u=(d=s.response)==null?void 0:d.data)==null?void 0:u.message)||"Failed to record outcome",!0)}}async function bt(){var a,e,d,u;if(w.value.hearing_date)try{const s={hearing_date:w.value.hearing_date};w.value.hearing_time&&(s.hearing_time=w.value.hearing_time),(a=w.value.location)!=null&&a.trim()&&(s.location=w.value.location.trim()),(e=w.value.notes)!=null&&e.trim()&&(s.notes=w.value.notes.trim()),s.is_public=w.value.is_public;const r=await h.post(`/appeals/${S.params.id}/hearing`,s);r.success&&(f(r.message),w.value={hearing_date:"",hearing_time:"",location:"",notes:"",is_public:!0},await P())}catch(s){f(((u=(d=s.response)==null?void 0:d.data)==null?void 0:u.message)||"Failed to schedule hearing",!0)}}async function Ue(a,e){var d,u;try{const s=await h.patch(`/appeals/${S.params.id}/hearing/${a}`,{outcome:e});s.success&&(f(s.message),await P())}catch(s){f(((u=(d=s.response)==null?void 0:d.data)==null?void 0:u.message)||"Failed to record outcome",!0)}}async function ht(){var a,e,d;if(m.value.issue_date)try{const u={issue_date:m.value.issue_date};m.value.hearing_date&&(u.hearing_date=m.value.hearing_date),(a=m.value.keyword)!=null&&a.trim()&&(u.keyword=m.value.keyword.trim()),u.app_for_leave=m.value.app_for_leave,u.leave_granted=m.value.leave_granted,u.is_public=m.value.is_public,u.subjects={...m.value.subjects};const s=await h.post(`/appeals/${S.params.id}/orders`,u);s.success&&(f(s.message),m.value={issue_date:"",hearing_date:"",keyword:"",app_for_leave:!1,leave_granted:!1,is_public:!0,subjects:{land:!1,membership:!1,compensation:!1,descent_of_property:!1,pmt_cancellations:!1,trespass:!1}},await P())}catch(u){f(((d=(e=u.response)==null?void 0:e.data)==null?void 0:d.message)||"Failed to record order",!0)}}return wt(()=>{tt(),ft(),P()}),(a,e)=>{var d,u;return l(),n("div",Dt,[he.value?(l(),n("div",Pt,"Loading appeal...")):ke.value?(l(),n("div",Ut,[t("goa-callout",xt,o(ke.value),1)])):p.value?(l(),n(y,{key:2},[t("div",Ft,[t("div",zt,[t("div",null,[t("h1",null,"Appeal "+o(p.value.file_number),1),t("p",null,o(p.value.settlement_name)+" — "+o(p.value.issue_type),1)]),t("goa-button",{type:"tertiary",on_click:e[0]||(e[0]=s=>a.$router.push("/appeals"))}," Back to Appeals ",32)])]),t("div",At,[t("div",Lt,[e[58]||(e[58]=t("span",{class:"status-label"},"Status",-1)),ve.value?(l(),n("div",Vt,[t("select",{class:"inline-select",value:p.value.status,onChange:e[1]||(e[1]=s=>lt(s)),onBlur:e[2]||(e[2]=s=>ve.value=!1)},[(l(!0),n(y,null,$(Fe.value,s=>(l(),n("option",{key:s.name,value:s.name},o(s.name),9,Ot))),128))],40,Tt)])):(l(),n("div",{key:1,class:"editable-value",onClick:st},[t("span",{class:F(["status-badge","status-"+(p.value.status||"").toLowerCase().replace(/\s+/g,"-")])},o(p.value.status),3),e[57]||(e[57]=t("span",{class:"edit-icon",title:"Edit status"},"✎",-1))]))]),t("div",Mt,[e[60]||(e[60]=t("span",{class:"status-label"},"Stage",-1)),me.value?(l(),n("div",Nt,[t("select",{class:"inline-select",value:p.value.stage,onChange:e[3]||(e[3]=s=>nt(s)),onBlur:e[4]||(e[4]=s=>me.value=!1)},[(l(!0),n(y,null,$(ze.value,s=>(l(),n("option",{key:s.code,value:s.code},o(s.code),9,Rt))),128))],40,jt)])):(l(),n("div",{key:1,class:"editable-value",onClick:at},[t("span",It,o(p.value.stage||"—"),1),e[59]||(e[59]=t("span",{class:"edit-icon",title:"Edit stage"},"✎",-1))]))]),t("div",Bt,[e[61]||(e[61]=t("span",{class:"status-label"},"Contact Date",-1)),t("span",null,o(U(p.value.contact_date)),1)]),t("div",Et,[e[62]||(e[62]=t("span",{class:"status-label"},"Primary Staff",-1)),t("span",null,o(p.value.primary_staff||"—"),1)])]),_e.value?(l(),n("div",{key:0,class:F(["update-feedback",Ae.value?"feedback-error":"feedback-success"])},o(_e.value),3)):i("",!0),t("div",Ht,[t("div",qt,[(l(!0),n(y,null,$(qe.value,s=>(l(),n("button",{key:s.key,class:F(["tab-button",{active:O.value===s.key}]),onClick:r=>O.value=s.key},[_(o(s.label)+" ",1),s.count!==void 0?(l(),n("span",Kt,o(s.count),1)):i("",!0)],10,Gt))),128))]),t("div",Yt,[O.value==="overview"?(l(),n("div",Qt,[t("div",Jt,[t("div",Xt,[e[63]||(e[63]=t("span",{class:"info-label"},"File Number",-1)),t("span",Wt,o(p.value.file_number),1)]),t("div",Zt,[e[64]||(e[64]=t("span",{class:"info-label"},"Settlement",-1)),t("span",es,o(p.value.settlement_name||"—"),1)]),t("div",ts,[e[65]||(e[65]=t("span",{class:"info-label"},"Issue Type",-1)),t("span",ss,o(p.value.issue_type||"—"),1)]),t("div",as,[e[66]||(e[66]=t("span",{class:"info-label"},"Primary Staff",-1)),t("span",ls,o(p.value.primary_staff||"—"),1)]),t("div",ns,[e[67]||(e[67]=t("span",{class:"info-label"},"Secondary Staff",-1)),t("span",os,o(p.value.secondary_staff||"—"),1)]),t("div",is,[e[68]||(e[68]=t("span",{class:"info-label"},"Contact Date",-1)),t("span",ds,o(U(p.value.contact_date)),1)]),p.value.mediation_date?(l(),n("div",us,[e[69]||(e[69]=t("span",{class:"info-label"},"Mediation Date",-1)),t("span",rs,o(U(p.value.mediation_date)),1)])):i("",!0),p.value.hearing_date?(l(),n("div",cs,[e[70]||(e[70]=t("span",{class:"info-label"},"Hearing Date",-1)),t("span",ps,o(U(p.value.hearing_date)),1)])):i("",!0),p.value.closed_date?(l(),n("div",vs,[e[71]||(e[71]=t("span",{class:"info-label"},"Closed Date",-1)),t("span",ms,o(U(p.value.closed_date)),1)])):i("",!0),p.value.on_hold_start?(l(),n("div",_s,[e[72]||(e[72]=t("span",{class:"info-label"},"On Hold Start",-1)),t("span",fs,o(U(p.value.on_hold_start)),1)])):i("",!0),p.value.on_hold_end?(l(),n("div",ys,[e[73]||(e[73]=t("span",{class:"info-label"},"On Hold End",-1)),t("span",gs,o(U(p.value.on_hold_end)),1)])):i("",!0)]),p.value.description?(l(),n("div",bs,[e[74]||(e[74]=t("span",{class:"info-label"},"Description",-1)),t("p",null,o(p.value.description),1)])):i("",!0),p.value.legal_description?(l(),n("div",hs,[e[75]||(e[75]=t("span",{class:"info-label"},"Legal Description",-1)),t("p",null,o(p.value.legal_description),1)])):i("",!0),p.value.background?(l(),n("div",ks,[e[76]||(e[76]=t("span",{class:"info-label"},"Background",-1)),t("p",null,o(p.value.background),1)])):i("",!0),t("div",ws,[e[84]||(e[84]=t("h3",null,"Mediation",-1)),t("div",$s,[t("div",Cs,[t("div",Ss,[e[77]||(e[77]=t("label",null,[_("Date "),t("span",{class:"required"},"*")],-1)),v(t("input",{type:"date",class:"panel-input","onUpdate:modelValue":e[5]||(e[5]=s=>k.value.hearing_date=s)},null,512),[[g,k.value.hearing_date]])]),t("div",Ds,[e[78]||(e[78]=t("label",null,"Time",-1)),v(t("input",{type:"time",class:"panel-input","onUpdate:modelValue":e[6]||(e[6]=s=>k.value.hearing_time=s)},null,512),[[g,k.value.hearing_time]])]),t("div",Ps,[e[79]||(e[79]=t("label",null,"Location",-1)),v(t("input",{type:"text",class:"panel-input","onUpdate:modelValue":e[7]||(e[7]=s=>k.value.location=s),placeholder:"e.g. MSAT Board Room"},null,512),[[g,k.value.location]])]),t("div",Us,[e[81]||(e[81]=t("label",null,"Public",-1)),v(t("select",{class:"inline-select","onUpdate:modelValue":e[8]||(e[8]=s=>k.value.is_public=s)},[...e[80]||(e[80]=[t("option",{value:!0},"Yes",-1),t("option",{value:!1},"No",-1)])],512),[[K,k.value.is_public]])]),t("div",xs,[e[82]||(e[82]=t("label",null,"Notes",-1)),v(t("input",{type:"text",class:"panel-input","onUpdate:modelValue":e[9]||(e[9]=s=>k.value.notes=s),placeholder:"Optional notes..."},null,512),[[g,k.value.notes]])]),t("div",Fs,[t("goa-button",{type:"secondary",size:"compact",disabled:!k.value.hearing_date,on_click:gt}," Schedule Mediation ",40,zs)])])]),Oe.value.length===0?(l(),n("div",As,"No mediations scheduled.")):(l(),n("div",Ls,[(l(!0),n(y,null,$(Oe.value,s=>{var r;return l(),n("div",{key:s.id,class:"mediation-card"},[t("div",Vs,[t("span",Ts,o(U(s.hearing_date)),1),s.hearing_time?(l(),n("span",Os,o((r=s.hearing_time)==null?void 0:r.substring(0,5)),1)):i("",!0),s.outcome?(l(),n("span",{key:1,class:F(["outcome-badge","outcome-"+s.outcome.toLowerCase()])},o(s.outcome),3)):i("",!0)]),t("div",Ms,[s.location?(l(),n("span",Ns,o(s.location),1)):i("",!0),s.is_public===!1?(l(),n("span",js,"Private")):i("",!0),s.notes?(l(),n("span",Rs,o(s.notes),1)):i("",!0)]),s.outcome?i("",!0):(l(),n("div",Is,[e[83]||(e[83]=t("label",{class:"outcome-label"},"Record Outcome:",-1)),t("goa-button",{type:"tertiary",size:"compact",on_click:C=>Pe(s.id,"Resolved")},"Resolved",40,Bs),t("goa-button",{type:"tertiary",size:"compact",on_click:C=>Pe(s.id,"Unresolved")},"Unresolved",40,Es),t("goa-button",{type:"tertiary",size:"compact",on_click:C=>Pe(s.id,"Adjourned")},"Adjourned",40,Hs)]))])}),128))]))]),t("div",qs,[e[93]||(e[93]=t("h3",null,"Hearings",-1)),t("div",Gs,[t("div",Ks,[t("div",Ys,[e[85]||(e[85]=t("label",null,[_("Date "),t("span",{class:"required"},"*")],-1)),v(t("input",{type:"date",class:"panel-input","onUpdate:modelValue":e[10]||(e[10]=s=>w.value.hearing_date=s)},null,512),[[g,w.value.hearing_date]])]),t("div",Qs,[e[86]||(e[86]=t("label",null,"Time",-1)),v(t("input",{type:"time",class:"panel-input","onUpdate:modelValue":e[11]||(e[11]=s=>w.value.hearing_time=s)},null,512),[[g,w.value.hearing_time]])]),t("div",Js,[e[87]||(e[87]=t("label",null,"Location",-1)),v(t("input",{type:"text",class:"panel-input","onUpdate:modelValue":e[12]||(e[12]=s=>w.value.location=s),placeholder:"e.g. MSAT Hearing Room"},null,512),[[g,w.value.location]])]),t("div",Xs,[e[89]||(e[89]=t("label",null,"Public",-1)),v(t("select",{class:"inline-select","onUpdate:modelValue":e[13]||(e[13]=s=>w.value.is_public=s)},[...e[88]||(e[88]=[t("option",{value:!0},"Yes",-1),t("option",{value:!1},"No",-1)])],512),[[K,w.value.is_public]])]),t("div",Ws,[e[90]||(e[90]=t("label",null,"Notes",-1)),v(t("input",{type:"text",class:"panel-input","onUpdate:modelValue":e[14]||(e[14]=s=>w.value.notes=s),placeholder:"Optional notes..."},null,512),[[g,w.value.notes]])]),t("div",Zs,[t("goa-button",{type:"secondary",size:"compact",disabled:!w.value.hearing_date,on_click:bt}," Schedule Hearing ",40,ea)])])]),Me.value.length===0?(l(),n("div",ta,"No hearings scheduled.")):(l(),n("div",sa,[(l(!0),n(y,null,$(Me.value,s=>{var r;return l(),n("div",{key:s.id,class:"mediation-card"},[t("div",aa,[t("span",la,o(U(s.hearing_date)),1),s.hearing_time?(l(),n("span",na,o((r=s.hearing_time)==null?void 0:r.substring(0,5)),1)):i("",!0),e[91]||(e[91]=t("span",{class:"hearing-type-badge"},"Oral Hearing",-1)),s.outcome?(l(),n("span",{key:1,class:F(["outcome-badge","outcome-"+s.outcome.toLowerCase()])},o(s.outcome),3)):i("",!0)]),t("div",oa,[s.location?(l(),n("span",ia,o(s.location),1)):i("",!0),s.is_public===!1?(l(),n("span",da,"Private")):i("",!0),s.notes?(l(),n("span",ua,o(s.notes),1)):i("",!0)]),s.outcome?i("",!0):(l(),n("div",ra,[e[92]||(e[92]=t("label",{class:"outcome-label"},"Record Outcome:",-1)),t("goa-button",{type:"tertiary",size:"compact",on_click:C=>Ue(s.id,"Completed")},"Completed",40,ca),t("goa-button",{type:"tertiary",size:"compact",on_click:C=>Ue(s.id,"Adjourned")},"Adjourned",40,pa),t("goa-button",{type:"tertiary",size:"compact",on_click:C=>Ue(s.id,"Cancelled")},"Cancelled",40,va)]))])}),128))]))]),t("div",ma,[e[108]||(e[108]=t("h3",null,"Orders / Decisions",-1)),t("div",_a,[t("div",fa,[t("div",ya,[e[94]||(e[94]=t("label",null,[_("Issue Date "),t("span",{class:"required"},"*")],-1)),v(t("input",{type:"date",class:"panel-input","onUpdate:modelValue":e[15]||(e[15]=s=>m.value.issue_date=s)},null,512),[[g,m.value.issue_date]])]),t("div",ga,[e[95]||(e[95]=t("label",null,"Hearing Date",-1)),v(t("input",{type:"date",class:"panel-input","onUpdate:modelValue":e[16]||(e[16]=s=>m.value.hearing_date=s)},null,512),[[g,m.value.hearing_date]])]),t("div",ba,[e[96]||(e[96]=t("label",null,"Keyword",-1)),v(t("input",{type:"text",class:"panel-input","onUpdate:modelValue":e[17]||(e[17]=s=>m.value.keyword=s),placeholder:"e.g. Land allocation dispute"},null,512),[[g,m.value.keyword]])]),t("div",ha,[e[98]||(e[98]=t("label",null,"Public",-1)),v(t("select",{class:"inline-select","onUpdate:modelValue":e[18]||(e[18]=s=>m.value.is_public=s)},[...e[97]||(e[97]=[t("option",{value:!0},"Yes",-1),t("option",{value:!1},"No",-1)])],512),[[K,m.value.is_public]])]),t("div",ka,[t("label",wa,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[19]||(e[19]=s=>m.value.app_for_leave=s)},null,512),[[T,m.value.app_for_leave]]),e[99]||(e[99]=_(" App for Leave ",-1))])]),t("div",$a,[t("label",Ca,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[20]||(e[20]=s=>m.value.leave_granted=s)},null,512),[[T,m.value.leave_granted]]),e[100]||(e[100]=_(" Leave Granted ",-1))])])]),t("div",Sa,[e[107]||(e[107]=t("label",{class:"subject-group-label"},"Subject Classification:",-1)),t("label",Da,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[21]||(e[21]=s=>m.value.subjects.land=s)},null,512),[[T,m.value.subjects.land]]),e[101]||(e[101]=_(" Land",-1))]),t("label",Pa,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[22]||(e[22]=s=>m.value.subjects.membership=s)},null,512),[[T,m.value.subjects.membership]]),e[102]||(e[102]=_(" Membership",-1))]),t("label",Ua,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[23]||(e[23]=s=>m.value.subjects.compensation=s)},null,512),[[T,m.value.subjects.compensation]]),e[103]||(e[103]=_(" Compensation",-1))]),t("label",xa,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[24]||(e[24]=s=>m.value.subjects.descent_of_property=s)},null,512),[[T,m.value.subjects.descent_of_property]]),e[104]||(e[104]=_(" Descent of Property",-1))]),t("label",Fa,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[25]||(e[25]=s=>m.value.subjects.pmt_cancellations=s)},null,512),[[T,m.value.subjects.pmt_cancellations]]),e[105]||(e[105]=_(" PMT Cancellations",-1))]),t("label",za,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[26]||(e[26]=s=>m.value.subjects.trespass=s)},null,512),[[T,m.value.subjects.trespass]]),e[106]||(e[106]=_(" Trespass",-1))])]),t("div",Aa,[t("goa-button",{type:"secondary",size:"compact",disabled:!m.value.issue_date,on_click:ht}," Record Order ",40,La)])]),be.value.length===0?(l(),n("div",Va,"No orders recorded.")):(l(),n("div",Ta,[(l(!0),n(y,null,$(be.value,s=>(l(),n("div",{key:s.id,class:"mediation-card"},[t("div",Oa,[t("span",Ma,"Order #"+o(s.order_number),1),t("span",Na,o(U(s.issue_date)),1),s.is_public===!1?(l(),n("span",ja,"Private")):(l(),n("span",Ra,"Public"))]),t("div",Ia,[s.hearing_date?(l(),n("span",Ba,"Hearing: "+o(U(s.hearing_date)),1)):i("",!0),s.keyword?(l(),n("span",Ea,o(s.keyword),1)):i("",!0)]),t("div",Ha,[s.app_for_leave?(l(),n("span",qa,"App for Leave")):i("",!0),s.leave_granted?(l(),n("span",Ga,"Leave Granted")):i("",!0),(l(!0),n(y,null,$(Ee(s),r=>(l(),n("span",{key:r,class:"subject-badge"},o(r),1))),128))])]))),128))]))])])):i("",!0),O.value==="parties"?(l(),n("div",Ka,[t("div",Ya,[e[122]||(e[122]=t("h3",null,"Add Party",-1)),t("div",Qa,[t("button",{class:F(["source-btn",I.value==="client"?"source-active":""]),onClick:e[27]||(e[27]=s=>I.value="client")},"Client",2),t("button",{class:F(["source-btn",I.value==="organization"?"source-active":""]),onClick:e[28]||(e[28]=s=>I.value="organization")},"Organization",2)]),I.value==="client"?(l(),n("div",Ja,[t("div",Xa,[e[109]||(e[109]=t("label",null,"Search Client",-1)),v(t("input",{type:"text",class:"search-input",placeholder:"Search by name or member ID...","onUpdate:modelValue":e[29]||(e[29]=s=>M.value=s),onInput:it,onFocus:e[30]||(e[30]=s=>W.value=!0),onBlur:ot},null,544),[[g,M.value]]),W.value&&(B.value.length>0||X.value||M.value.length>=2&&!X.value)?(l(),n("div",Wa,[X.value?(l(),n("div",Za,"Searching...")):B.value.length===0&&M.value.length>=2?(l(),n("div",el,"No clients found")):i("",!0),(l(!0),n(y,null,$(B.value,s=>{var r;return l(),n("div",{key:s.id,class:F(["search-item",{selected:((r=x.value)==null?void 0:r.id)===s.id}]),onMousedown:ge(C=>dt(s),["prevent"])},[t("span",sl,o(s.first_name)+" "+o(s.last_name),1),t("span",al,o([s.member_id,s.settlement||s.city].filter(Boolean).join(" · ")),1)],42,tl)}),128))])):i("",!0),x.value?(l(),n("div",ll,[_(o(x.value.first_name)+" "+o(x.value.last_name)+" ",1),t("button",{class:"clear-btn",onClick:Re},"×")])):i("",!0),!x.value&&!te.value?(l(),n("div",nl,[t("a",{href:"#",onClick:e[31]||(e[31]=ge(s=>te.value=!0,["prevent"]))},"Create New Client")])):i("",!0)]),t("div",ol,[e[111]||(e[111]=t("label",null,"Party Type",-1)),v(t("select",{"onUpdate:modelValue":e[32]||(e[32]=s=>N.value=s),class:"inline-select"},[...e[110]||(e[110]=[t("option",{value:"Applicant"},"Applicant",-1),t("option",{value:"Respondent"},"Respondent",-1),t("option",{value:"Intervenor"},"Intervenor",-1),t("option",{value:"Affected Party"},"Affected Party",-1)])],512),[[K,N.value]])]),t("div",il,[t("goa-button",{type:"secondary",size:"compact",disabled:!x.value,on_click:ut}," Add Party ",40,dl)])])):i("",!0),I.value==="client"&&te.value?(l(),n("div",ul,[e[118]||(e[118]=t("h4",null,"Create New Client",-1)),t("div",rl,[t("div",cl,[e[112]||(e[112]=t("label",null,[_("First Name "),t("span",{class:"required"},"*")],-1)),v(t("input",{type:"text",class:"panel-input","onUpdate:modelValue":e[33]||(e[33]=s=>D.value.first_name=s),placeholder:"First name"},null,512),[[g,D.value.first_name]])]),t("div",pl,[e[113]||(e[113]=t("label",null,[_("Last Name "),t("span",{class:"required"},"*")],-1)),v(t("input",{type:"text",class:"panel-input","onUpdate:modelValue":e[34]||(e[34]=s=>D.value.last_name=s),placeholder:"Last name"},null,512),[[g,D.value.last_name]])]),t("div",vl,[e[114]||(e[114]=t("label",null,"Email",-1)),v(t("input",{type:"email",class:"panel-input","onUpdate:modelValue":e[35]||(e[35]=s=>D.value.email=s),placeholder:"email@example.com"},null,512),[[g,D.value.email]])]),t("div",ml,[e[115]||(e[115]=t("label",null,"Phone (Cell)",-1)),v(t("input",{type:"text",class:"panel-input","onUpdate:modelValue":e[36]||(e[36]=s=>D.value.phone_cell=s),placeholder:"Phone"},null,512),[[g,D.value.phone_cell]])]),t("div",_l,[e[117]||(e[117]=t("label",null,"Settlement",-1)),v(t("select",{class:"panel-input","onUpdate:modelValue":e[37]||(e[37]=s=>D.value.settlement=s)},[...e[116]||(e[116]=[$t('<option value="" data-v-2dd51cd8>— Select —</option><option value="Buffalo Lake" data-v-2dd51cd8>Buffalo Lake</option><option value="East Prairie" data-v-2dd51cd8>East Prairie</option><option value="Elizabeth" data-v-2dd51cd8>Elizabeth</option><option value="Fishing Lake" data-v-2dd51cd8>Fishing Lake</option><option value="Gift Lake" data-v-2dd51cd8>Gift Lake</option><option value="Kikino" data-v-2dd51cd8>Kikino</option><option value="Paddle Prairie" data-v-2dd51cd8>Paddle Prairie</option><option value="Peavine" data-v-2dd51cd8>Peavine</option>',9)])],512),[[K,D.value.settlement]])])]),t("div",fl,[t("goa-button",{type:"secondary",size:"compact",disabled:!((d=D.value.first_name)!=null&&d.trim())||!((u=D.value.last_name)!=null&&u.trim()),on_click:_t}," Create & Select ",40,yl),t("goa-button",{type:"tertiary",size:"compact",on_click:e[38]||(e[38]=s=>te.value=!1)},"Cancel",32)])])):i("",!0),I.value==="organization"?(l(),n("div",gl,[t("div",bl,[e[119]||(e[119]=t("label",null,"Search Organization",-1)),v(t("input",{type:"text",class:"search-input",placeholder:"Search by organization name...","onUpdate:modelValue":e[39]||(e[39]=s=>j.value=s),onInput:pt,onFocus:e[40]||(e[40]=s=>ee.value=!0),onBlur:ct},null,544),[[g,j.value]]),ee.value&&(E.value.length>0||Z.value||j.value.length>=2&&!Z.value)?(l(),n("div",hl,[Z.value?(l(),n("div",kl,"Searching...")):E.value.length===0&&j.value.length>=2?(l(),n("div",wl,"No organizations found")):i("",!0),(l(!0),n(y,null,$(E.value,s=>{var r;return l(),n("div",{key:s.id,class:F(["search-item",{selected:((r=A.value)==null?void 0:r.id)===s.id}]),onMousedown:ge(C=>vt(s),["prevent"])},[t("span",Cl,o(s.name),1),t("span",Sl,o(s.city||""),1)],42,$l)}),128))])):i("",!0),A.value?(l(),n("div",Dl,[_(o(A.value.name)+" ",1),t("button",{class:"clear-btn",onClick:Ie},"×")])):i("",!0)]),t("div",Pl,[e[121]||(e[121]=t("label",null,"Party Type",-1)),v(t("select",{"onUpdate:modelValue":e[41]||(e[41]=s=>N.value=s),class:"inline-select"},[...e[120]||(e[120]=[t("option",{value:"Applicant"},"Applicant",-1),t("option",{value:"Respondent"},"Respondent",-1),t("option",{value:"Intervenor"},"Intervenor",-1),t("option",{value:"Affected Party"},"Affected Party",-1)])],512),[[K,N.value]])]),t("div",Ul,[t("goa-button",{type:"secondary",size:"compact",disabled:!A.value,on_click:mt}," Add Party ",40,xl)])])):i("",!0)]),re.value.length===0?(l(),n("div",Fl,"No parties linked to this appeal.")):(l(),n("table",zl,[e[123]||(e[123]=t("thead",null,[t("tr",null,[t("th",null,"Type"),t("th",null,"Name"),t("th",null,"Contact"),t("th",null,"Address"),t("th",null,"Actions")])],-1)),t("tbody",null,[(l(!0),n(y,null,$(re.value,s=>(l(),n("tr",{key:s.id},[t("td",null,[t("span",{class:F(["party-badge","party-"+(s.party_type||"").toLowerCase().replace(/\s+/g,"-")])},o(s.party_type),3)]),t("td",null,[s.first_name?(l(),n("span",Al,o(s.first_name)+" "+o(s.last_name),1)):s.org_name?(l(),n("span",Ll,o(s.org_name),1)):(l(),n("span",Vl,"—"))]),t("td",null,[s.client_email?(l(),n("div",Tl,o(s.client_email),1)):i("",!0),s.phone_cell?(l(),n("div",Ol,o(s.phone_cell),1)):i("",!0),!s.client_email&&!s.phone_cell?(l(),n("span",Ml,"—")):i("",!0)]),t("td",null,[s.address_1?(l(),n("span",Nl,[_(o(s.address_1),1),s.city?(l(),n(y,{key:0},[_(", "+o(s.city),1)],64)):i("",!0),s.province?(l(),n(y,{key:1},[_(o(s.province),1)],64)):i("",!0),s.postal_code?(l(),n(y,{key:2},[_(o(s.postal_code),1)],64)):i("",!0)])):(l(),n("span",jl,"—"))]),t("td",null,[t("goa-button",{type:"tertiary",size:"compact",on_click:r=>rt(s.id,s.first_name||s.org_name)}," Remove ",40,Rl)])]))),128))])]))])):i("",!0),O.value==="timeline"?(l(),n("div",Il,[Se.value.length===0?(l(),n("div",Bl,"No timeline events recorded.")):(l(),n("div",El,[(l(!0),n(y,null,$(Se.value,s=>(l(),n("div",{key:s.id,class:"timeline-item"},[e[124]||(e[124]=t("div",{class:"timeline-dot"},null,-1)),t("div",Hl,[t("div",ql,[t("span",Gl,o(Ge(s.action||s.type)),1),t("span",Kl,o(Ne(s.created_at||s.date)),1)]),s.performed_by?(l(),n("div",Yl,"by "+o(s.performed_by),1)):i("",!0),s.details?(l(),n("div",Ql,o(Ke(s.details)),1)):i("",!0),s.location?(l(),n("div",Jl,"Location: "+o(s.location),1)):i("",!0)])]))),128))]))])):i("",!0),O.value==="panel"?(l(),n("div",Xl,[t("div",Wl,[e[130]||(e[130]=t("h3",null,"Assign Panel",-1)),t("div",Zl,[t("div",en,[e[125]||(e[125]=t("label",null,[_("Panel Chair "),t("span",{class:"required"},"*")],-1)),v(t("input",{type:"text",class:"panel-input","onUpdate:modelValue":e[42]||(e[42]=s=>b.value.panel_chair=s),list:"board-member-list",placeholder:"Type or select name..."},null,512),[[g,b.value.panel_chair]])]),t("div",tn,[e[126]||(e[126]=t("label",null,[_("Panel Member 2 "),t("span",{class:"required"},"*")],-1)),v(t("input",{type:"text",class:"panel-input","onUpdate:modelValue":e[43]||(e[43]=s=>b.value.panel_member_2=s),list:"board-member-list",placeholder:"Type or select name..."},null,512),[[g,b.value.panel_member_2]])]),t("div",sn,[e[127]||(e[127]=t("label",null,"Panel Member 3",-1)),v(t("input",{type:"text",class:"panel-input","onUpdate:modelValue":e[44]||(e[44]=s=>b.value.panel_member_3=s),list:"board-member-list",placeholder:"Optional"},null,512),[[g,b.value.panel_member_3]])]),t("div",an,[e[128]||(e[128]=t("label",null,"Mediator",-1)),v(t("input",{type:"text",class:"panel-input","onUpdate:modelValue":e[45]||(e[45]=s=>b.value.mediator=s),list:"board-member-list",placeholder:"Optional"},null,512),[[g,b.value.mediator]])]),t("div",ln,[e[129]||(e[129]=t("label",null,"Date Assigned",-1)),v(t("input",{type:"date",class:"panel-input","onUpdate:modelValue":e[46]||(e[46]=s=>b.value.date_assigned=s)},null,512),[[g,b.value.date_assigned]])]),t("div",nn,[t("goa-button",{type:"secondary",size:"compact",disabled:!b.value.panel_chair||!b.value.panel_member_2,on_click:yt}," Save Panel ",40,on)])]),t("datalist",dn,[(l(!0),n(y,null,$(He.value,s=>(l(),n("option",{key:s,value:s},null,8,un))),128))])]),ce.value.length===0?(l(),n("div",rn,"No panel compositions assigned yet.")):(l(),n("div",cn,[(l(!0),n(y,null,$(ce.value,s=>(l(),n("div",{key:s.id,class:"panel-card"},[t("div",pn,[e[131]||(e[131]=t("span",{class:"info-label"},"Panel Assigned",-1)),s.date_assigned?(l(),n("span",vn,o(U(s.date_assigned)),1)):(l(),n("span",mn,"Date not recorded"))]),t("div",_n,[t("div",fn,[e[132]||(e[132]=t("span",{class:"member-role"},"Chair",-1)),t("span",yn,o(s.panel_chair||"—"),1)]),t("div",gn,[e[133]||(e[133]=t("span",{class:"member-role"},"Member",-1)),t("span",bn,o(s.panel_member_2||"—"),1)]),s.panel_member_3?(l(),n("div",hn,[e[134]||(e[134]=t("span",{class:"member-role"},"Member",-1)),t("span",kn,o(s.panel_member_3),1)])):i("",!0),s.mediator?(l(),n("div",wn,[e[135]||(e[135]=t("span",{class:"member-role"},"Mediator",-1)),t("span",$n,o(s.mediator),1)])):i("",!0)])]))),128))]))])):i("",!0),O.value==="documents"?(l(),n("div",Cn,[t("div",Sn,[t("goa-button",{type:"primary",size:"compact",on_click:e[47]||(e[47]=s=>Y.value=!Y.value)},o(Y.value?"Cancel":"Upload Document"),33)]),Y.value?(l(),n("div",Dn,[e[140]||(e[140]=t("h3",null,"Upload Document",-1)),t("div",Pn,[t("div",Un,[e[136]||(e[136]=t("label",null,[_("File "),t("span",{class:"required"},"*")],-1)),t("div",xn,[t("input",{type:"file",ref_key:"fileInput",ref:we,onChange:Ye,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png"},null,544)]),R.value?(l(),n("div",Fn,o(R.value.name)+" ("+o(De(R.value.size))+") ",1)):i("",!0)]),t("div",zn,[e[138]||(e[138]=t("label",null,"Category",-1)),v(t("select",{class:"search-input","onUpdate:modelValue":e[48]||(e[48]=s=>se.value=s)},[e[137]||(e[137]=t("option",{value:""},"— Select —",-1)),(l(),n(y,null,$(Be,s=>t("option",{key:s,value:s},o(s),9,An)),64))],512),[[K,se.value]])]),t("div",Ln,[e[139]||(e[139]=t("label",null,"Description",-1)),v(t("input",{type:"text",class:"search-input","onUpdate:modelValue":e[49]||(e[49]=s=>ae.value=s),placeholder:"Brief description..."},null,512),[[g,ae.value]])])]),H.value>0&&H.value<100?(l(),n("div",Vn,[t("div",{class:"upload-progress-bar",style:Ct({width:H.value+"%"})},null,4),t("span",null,o(H.value)+"%",1)])):i("",!0),t("div",Tn,[t("goa-button",{type:"primary",size:"compact",disabled:!R.value||le.value,on_click:Qe},o(le.value?"Uploading...":"Upload"),41,On),t("goa-button",{type:"tertiary",size:"compact",on_click:je},"Cancel",32)])])):i("",!0),fe.value?(l(),n("div",{key:1,class:F(["doc-feedback",Te.value?"doc-feedback-error":"doc-feedback-success"])},o(fe.value),3)):i("",!0),z.value.length===0&&!Y.value?(l(),n("div",Mn,"No documents uploaded.")):i("",!0),z.value.length>0?(l(),n("table",Nn,[e[141]||(e[141]=t("thead",null,[t("tr",null,[t("th",null,"File Name"),t("th",null,"Type"),t("th",null,"Category"),t("th",null,"Size"),t("th",null,"Uploaded"),t("th",null,"Actions")])],-1)),t("tbody",null,[(l(!0),n(y,null,$(z.value,s=>(l(),n("tr",{key:s.id},[t("td",jn,o(s.original_name||s.file_name),1),t("td",null,[t("span",Rn,o((s.file_type||"").toUpperCase()),1)]),t("td",null,o(s.category||"—"),1),t("td",null,o(s.file_size?De(s.file_size):"—"),1),t("td",null,o(U(s.created_at)),1),t("td",In,[t("button",{class:"doc-action-btn doc-download-btn",title:"Download",onClick:r=>Je(s)},"⇩",8,Bn),t("button",{class:"doc-action-btn doc-delete-btn",title:"Delete",onClick:r=>Xe(s)},"✕",8,En)])]))),128))])])):i("",!0),L.value?(l(),n("div",{key:4,class:"doc-confirm-overlay",onClick:e[51]||(e[51]=ge(s=>L.value=null,["self"]))},[t("div",Hn,[t("p",null,[e[142]||(e[142]=_("Delete document ",-1)),t("strong",null,'"'+o(L.value.original_name||L.value.file_name)+'"',1),e[143]||(e[143]=_("?",-1))]),e[144]||(e[144]=t("p",{class:"doc-confirm-warning"},"This action cannot be undone.",-1)),t("div",qn,[t("goa-button",{type:"primary",size:"compact",on_click:We},"Delete",32),t("goa-button",{type:"tertiary",size:"compact",on_click:e[50]||(e[50]=s=>L.value=null)},"Cancel",32)])])])):i("",!0),t("div",Gn,[t("div",Kn,[e[145]||(e[145]=t("h3",null,"Hearing Packages",-1)),z.value.length>0?(l(),n("goa-button",{key:0,type:"secondary",size:"compact",on_click:e[52]||(e[52]=s=>Q.value=!Q.value)},o(Q.value?"Cancel":"Compile Package"),33)):i("",!0)]),Q.value?(l(),n("div",Yn,[t("div",Qn,[e[146]||(e[146]=t("label",null,"Package Name",-1)),v(t("input",{type:"text",class:"search-input","onUpdate:modelValue":e[53]||(e[53]=s=>ne.value=s),placeholder:"Hearing Package — "+new Date().toLocaleDateString("en-CA")},null,8,Jn),[[g,ne.value]])]),t("div",Xn,[e[147]||(e[147]=t("label",null,[_("Select Documents "),t("span",{class:"required"},"*")],-1)),t("div",Wn,[(l(!0),n(y,null,$(z.value,s=>(l(),n("label",{key:s.id,class:"hp-doc-check-item"},[v(t("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":e[54]||(e[54]=r=>V.value=r)},null,8,Zn),[[T,V.value]]),t("span",eo,o(s.original_name||s.file_name),1),t("span",to,o((s.file_type||"").toUpperCase())+" · "+o(s.category||"No category"),1)]))),128))]),t("div",so,[t("button",{class:"hp-select-link",onClick:e[55]||(e[55]=s=>V.value=z.value.map(r=>r.id))},"Select All"),t("button",{class:"hp-select-link",onClick:e[56]||(e[56]=s=>V.value=[])},"Clear"),t("span",ao,o(V.value.length)+" of "+o(z.value.length)+" selected",1)])]),t("div",lo,[t("goa-button",{type:"primary",size:"compact",disabled:V.value.length===0||oe.value,on_click:Ze},o(oe.value?"Compiling...":"Compile"),41,no)])])):i("",!0),ye.value.length===0&&!Q.value?(l(),n("div",oo,"No hearing packages compiled.")):i("",!0),ye.value.length>0?(l(),n("div",io,[(l(!0),n(y,null,$(ye.value,s=>(l(),n("div",{key:s.id,class:"hp-card"},[t("div",{class:"hp-card-header",onClick:r=>et(s)},[t("div",ro,[t("span",co,o(s.name),1),t("span",po,[_(o(U(s.compiled_date))+" ",1),s.compiled_by_name?(l(),n(y,{key:0},[_(" · "+o(s.compiled_by_name),1)],64)):i("",!0)])]),t("div",vo,[t("span",mo,o(s.status),1),t("span",_o,o(s.document_count||"—")+" doc(s)",1),t("span",{class:F(["hp-expand-icon",{"hp-expanded":ie.value===s.id}])},"▼",2)])],8,uo),ie.value===s.id?(l(),n("div",fo,[$e.value?(l(),n("div",yo,"Loading documents...")):de.value.length>0?(l(),n("table",go,[e[148]||(e[148]=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"File Name"),t("th",null,"Type"),t("th",null,"Category"),t("th",null,"Size")])],-1)),t("tbody",null,[(l(!0),n(y,null,$(de.value,r=>(l(),n("tr",{key:r.id},[t("td",null,o(r.sort_order),1),t("td",null,o(r.original_name||r.file_name),1),t("td",null,[t("span",bo,o((r.file_type||"").toUpperCase()),1)]),t("td",null,o(r.category||"—"),1),t("td",null,o(r.file_size?De(r.file_size):"—"),1)]))),128))])])):(l(),n("div",ho,"No documents in this package."))])):i("",!0)]))),128))])):i("",!0)])])):i("",!0),O.value==="notes"?(l(),n("div",ko,[!p.value.notes&&J.value.length===0?(l(),n("div",wo,"No notes or correspondence recorded.")):i("",!0),p.value.notes?(l(),n("div",$o,[e[149]||(e[149]=t("h3",null,"Internal Notes",-1)),t("div",Co,o(p.value.notes),1)])):i("",!0),J.value.length>0?(l(),n("div",So,[e[150]||(e[150]=t("h3",null,"Correspondence",-1)),(l(!0),n(y,null,$(J.value,s=>(l(),n("div",{key:s.id,class:"correspondence-item"},[t("div",Do,[t("span",Po,o(s.subject||s.template_type||"No subject"),1),t("span",Uo,o(Ne(s.sent_date||s.created_at)),1)]),s.recipient?(l(),n("div",xo,"To: "+o(s.recipient),1)):i("",!0),s.sent_by?(l(),n("div",Fo,"From: "+o(s.sent_by),1)):i("",!0),s.body?(l(),n("div",zo,o(s.body),1)):i("",!0)]))),128))])):i("",!0)])):i("",!0)])])],64)):i("",!0)])}}},To=kt(Ao,[["__scopeId","data-v-2dd51cd8"]]);export{To as default};
//# sourceMappingURL=AppealDetail-CA8CDuwJ.js.map
