import{_ as U,o as V,a as l,c as o,b as e,t as r,g as c,F as f,r as h,f as g,h as w,v as H,e as F,d as _,i as C,u as J,n as K}from"./index-DxPLqLYP.js";const X={class:"submit-appeal"},Q={key:0,class:"success-container"},W={type:"success",heading:"Appeal Submitted Successfully"},Z={class:"reference-number"},ee={key:0},te={class:"success-actions"},se={key:1},ie={class:"step-indicator"},le={class:"step-circle"},oe={key:0},ae={key:1},ne={class:"step-label"},re={key:0,type:"emergency",heading:"Error"},de={class:"form-container"},ue={class:"form-grid"},pe=["error"],ce=["value"],me={label:"MSGC Member ID (Optional)"},_e=["value"],ve=["error"],fe=["value"],he=["value","label"],ge={class:"form-grid"},ye={label:"Phone (Optional)"},be=["value"],we={label:"Email (Optional)"},ke=["value"],Se={label:"Mailing Address (Optional)"},De=["value"],Me=["error"],Fe=["value"],Ie=["value","label"],Ae={class:"form-grid"},xe={label:"Date of Decision (Optional)"},Pe={label:"Decision Maker (Optional)"},Oe=["value"],qe=["error"],Ce=["value"],Te={class:"char-count"},Ye={class:"file-upload-area"},Ne={key:0,class:"file-list"},Be={class:"file-info"},Re={class:"file-icon"},je={class:"file-name"},ze={class:"file-size"},Ee=["on_click"],Ge={key:1,class:"no-files-msg"},Le={class:"review-section"},$e={class:"review-grid"},Ue={class:"review-item"},Ve={class:"review-value"},He={key:0,class:"review-item"},Je={class:"review-value"},Ke={class:"review-item"},Xe={class:"review-value"},Qe={key:1,class:"review-item"},We={class:"review-value"},Ze={key:2,class:"review-item"},et={class:"review-value"},tt={key:3,class:"review-item"},st={class:"review-value"},it={class:"review-section"},lt={class:"review-grid"},ot={class:"review-item"},at={class:"review-value"},nt={key:0,class:"review-item"},rt={class:"review-value"},dt={key:1,class:"review-item"},ut={class:"review-value"},pt={class:"review-item full-width"},ct={class:"review-value description-preview"},mt={key:0,class:"review-section"},_t={class:"review-files"},vt={class:"declarations"},ft=["error"],ht=["checked"],gt=["error"],yt=["checked"],bt={class:"step-actions"},wt=["disabled"],kt={__name:"SubmitAppeal",setup(St){J();const T=["Your Information","Appeal Details","Documents","Review & Submit"],p=_(1),y=_(!1),k=_(!1),S=_(""),b=_(0),v=_(""),I=_([]),A=_([]),m=_([]),Y=_(null),s=C({full_name:"",member_id:"",settlement:"",phone:"",email:"",address:"",issue_type:"",decision_date:"",decision_maker:"",description:"",declaration_truthful:!1,declaration_deadlines:!1}),a=C({full_name:"",settlement:"",issue_type:"",description:"",declaration_truthful:"",declaration_deadlines:""});async function N(){try{const[n,t]=await Promise.all([F.get("/public/settlements"),F.get("/public/issue-types")]);I.value=n.data||[],A.value=t.data||[]}catch{v.value="Failed to load form data. Please refresh the page."}}function x(n){var i,d;let t=!0;return n===1&&(a.full_name="",a.settlement="",(i=s.full_name)!=null&&i.trim()||(a.full_name="Full name is required",t=!1),s.settlement||(a.settlement="Settlement is required",t=!1)),n===2&&(a.issue_type="",a.description="",s.issue_type||(a.issue_type="Issue type is required",t=!1),(d=s.description)!=null&&d.trim()||(a.description="Description is required",t=!1),s.description&&s.description.length>5e3&&(a.description="Max 5000 characters",t=!1)),n===4&&(a.declaration_truthful="",a.declaration_deadlines="",s.declaration_truthful||(a.declaration_truthful="You must confirm this declaration",t=!1),s.declaration_deadlines||(a.declaration_deadlines="You must acknowledge the filing deadlines",t=!1)),t}function B(){x(p.value)&&(p.value++,window.scrollTo({top:0,behavior:"smooth"}))}function R(){p.value--,window.scrollTo({top:0,behavior:"smooth"})}function j(n){const t=Array.from(n.target.files),i=10-m.value.length;if(i<=0){v.value="Maximum 10 files allowed";return}const d=t.slice(0,i);m.value.push(...d),n.target.value=""}function z(n){m.value.splice(n,1)}async function E(){var n,t,i,d,D,O,q;if(x(4)){y.value=!0,v.value="";try{const u=new FormData;u.append("full_name",s.full_name.trim()),(n=s.member_id)!=null&&n.trim()&&u.append("member_id",s.member_id.trim()),u.append("settlement",s.settlement),(t=s.phone)!=null&&t.trim()&&u.append("phone",s.phone.trim()),(i=s.email)!=null&&i.trim()&&u.append("email",s.email.trim()),(d=s.address)!=null&&d.trim()&&u.append("address",s.address.trim()),u.append("issue_type",s.issue_type),s.decision_date&&u.append("decision_date",s.decision_date),(D=s.decision_maker)!=null&&D.trim()&&u.append("decision_maker",s.decision_maker.trim()),u.append("description",s.description.trim()),u.append("declaration_truthful","true"),u.append("declaration_deadlines","true");for(const $ of m.value)u.append("files",$);const M=await F.post("/public/submissions",u,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4});M.success&&(S.value=M.reference_number,b.value=M.documents_uploaded||0,k.value=!0,window.scrollTo({top:0,behavior:"smooth"}))}catch(u){v.value=((q=(O=u.response)==null?void 0:O.data)==null?void 0:q.message)||"Failed to submit appeal. Please try again."}finally{y.value=!1}}}function G(){Object.assign(s,{full_name:"",member_id:"",settlement:"",phone:"",email:"",address:"",issue_type:"",decision_date:"",decision_maker:"",description:"",declaration_truthful:!1,declaration_deadlines:!1}),Object.keys(a).forEach(n=>a[n]=""),m.value=[],p.value=1,k.value=!1,S.value="",b.value=0,v.value=""}function P(n){return n<1024?n+" B":n<1048576?(n/1024).toFixed(1)+" KB":(n/1048576).toFixed(1)+" MB"}function L(n){var d;const t=(d=n.split(".").pop())==null?void 0:d.toLowerCase();return{pdf:"PDF",doc:"DOC",docx:"DOC",jpg:"IMG",jpeg:"IMG",png:"IMG"}[t]||"FILE"}return V(N),(n,t)=>(l(),o("div",X,[t[39]||(t[39]=e("header",{class:"page-header"},[e("h1",null,"File an Appeal Online"),e("p",null,"Submit your appeal to the Metis Settlements Appeal Tribunal")],-1)),k.value?(l(),o("div",Q,[e("goa-callout",W,[t[14]||(t[14]=e("p",null,"Your appeal has been received. Your reference number is:",-1)),e("p",Z,r(S.value),1),t[15]||(t[15]=e("p",null,"Please save this reference number for your records. You will need it when contacting us about your appeal.",-1)),b.value>0?(l(),o("p",ee,r(b.value)+" document(s) uploaded successfully.",1)):c("",!0)]),e("div",te,[e("goa-button",{type:"primary",on_click:t[0]||(t[0]=i=>n.$router.push("/"))},"Return to Home",32),e("goa-button",{type:"secondary",on_click:G},"Submit Another Appeal",32)])])):(l(),o("div",se,[e("div",ie,[(l(),o(f,null,h(T,(i,d)=>e("div",{key:d,class:K(["step-item",{active:p.value===d+1,completed:p.value>d+1}])},[e("div",le,[p.value>d+1?(l(),o("span",oe,"âœ“")):(l(),o("span",ae,r(d+1),1))]),e("span",ne,r(i),1)],2)),64))]),v.value?(l(),o("goa-callout",re,r(v.value),1)):c("",!0),e("div",de,[g(e("div",null,[t[16]||(t[16]=e("h2",null,"Step 1: Your Information",-1)),t[17]||(t[17]=e("p",{class:"step-description"},"Please provide your contact details.",-1)),e("div",ue,[e("goa-form-item",{label:"Full Name",requirement:"required",error:a.full_name},[e("goa-input",{name:"full_name",value:s.full_name,on_change:t[1]||(t[1]=i=>{s.full_name=i.detail.value,a.full_name=""}),width:"100%",placeholder:"Your full legal name"},null,40,ce)],8,pe),e("goa-form-item",me,[e("goa-input",{name:"member_id",value:s.member_id,on_change:t[2]||(t[2]=i=>s.member_id=i.detail.value),width:"100%",placeholder:"e.g. M-12345"},null,40,_e)])]),e("goa-form-item",{label:"Settlement",requirement:"required",error:a.settlement},[e("goa-dropdown",{name:"settlement",value:s.settlement,on_change:t[3]||(t[3]=i=>{s.settlement=i.detail.value,a.settlement=""}),width:"100%",placeholder:"Select your settlement"},[(l(!0),o(f,null,h(I.value,i=>(l(),o("goa-dropdown-item",{key:i,value:i,label:i},null,8,he))),128))],40,fe)],8,ve),e("div",ge,[e("goa-form-item",ye,[e("goa-input",{name:"phone",value:s.phone,on_change:t[4]||(t[4]=i=>s.phone=i.detail.value),width:"100%",type:"tel",placeholder:"780-555-0100"},null,40,be)]),e("goa-form-item",we,[e("goa-input",{name:"email",value:s.email,on_change:t[5]||(t[5]=i=>s.email=i.detail.value),width:"100%",type:"email",placeholder:"you@example.com"},null,40,ke)])]),e("goa-form-item",Se,[e("goa-textarea",{name:"address",value:s.address,on_change:t[6]||(t[6]=i=>s.address=i.detail.value),width:"100%",rows:"2",placeholder:"Street address, city, province, postal code"},null,40,De)])],512),[[w,p.value===1]]),g(e("div",null,[t[18]||(t[18]=e("h2",null,"Step 2: Appeal Details",-1)),t[19]||(t[19]=e("p",{class:"step-description"},"Describe the decision you are appealing.",-1)),e("goa-form-item",{label:"Issue Type",requirement:"required",error:a.issue_type},[e("goa-dropdown",{name:"issue_type",value:s.issue_type,on_change:t[7]||(t[7]=i=>{s.issue_type=i.detail.value,a.issue_type=""}),width:"100%",placeholder:"Select the type of issue"},[(l(!0),o(f,null,h(A.value,i=>(l(),o("goa-dropdown-item",{key:i,value:i,label:i},null,8,Ie))),128))],40,Fe)],8,Me),e("div",Ae,[e("goa-form-item",xe,[g(e("input",{type:"date",class:"goa-date-input","onUpdate:modelValue":t[8]||(t[8]=i=>s.decision_date=i)},null,512),[[H,s.decision_date]])]),e("goa-form-item",Pe,[e("goa-input",{name:"decision_maker",value:s.decision_maker,on_change:t[9]||(t[9]=i=>s.decision_maker=i.detail.value),width:"100%",placeholder:"Name of person/body that made the decision"},null,40,Oe)])]),e("goa-form-item",{label:"Description of Appeal",requirement:"required",error:a.description},[e("goa-textarea",{name:"description",value:s.description,on_change:t[10]||(t[10]=i=>{s.description=i.detail.value,a.description=""}),width:"100%",rows:"6",placeholder:"Please describe the decision you are appealing and why you believe it should be reviewed..."},null,40,Ce),e("span",Te,r((s.description||"").length)+"/5000",1)],8,qe)],512),[[w,p.value===2]]),g(e("div",null,[t[21]||(t[21]=e("h2",null,"Step 3: Supporting Documents",-1)),t[22]||(t[22]=e("p",{class:"step-description"},"Upload any supporting documents (optional). Accepted: PDF, DOC, DOCX, JPG, PNG. Max 50 MB each, up to 10 files.",-1)),e("div",Ye,[e("input",{ref_key:"fileInput",ref:Y,type:"file",multiple:"",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:j,class:"file-input-hidden"},null,544),e("goa-button",{type:"secondary",on_click:t[11]||(t[11]=i=>n.$refs.fileInput.click())}," Choose Files ",32),t[20]||(t[20]=e("span",{class:"file-hint"},"or drag and drop files here",-1))]),m.value.length>0?(l(),o("div",Ne,[(l(!0),o(f,null,h(m.value,(i,d)=>(l(),o("div",{key:d,class:"file-item"},[e("div",Be,[e("span",Re,r(L(i.name)),1),e("span",je,r(i.name),1),e("span",ze,r(P(i.size)),1)]),e("goa-button",{type:"tertiary",size:"compact",on_click:D=>z(d)}," Remove ",40,Ee)]))),128))])):(l(),o("p",Ge,"No files selected. You can continue without uploading documents."))],512),[[w,p.value===3]]),g(e("div",null,[t[36]||(t[36]=e("h2",null,"Step 4: Review & Submit",-1)),t[37]||(t[37]=e("p",{class:"step-description"},"Please review your information before submitting.",-1)),e("div",Le,[t[29]||(t[29]=e("h3",null,"Your Information",-1)),e("div",$e,[e("div",Ue,[t[23]||(t[23]=e("span",{class:"review-label"},"Full Name",-1)),e("span",Ve,r(s.full_name),1)]),s.member_id?(l(),o("div",He,[t[24]||(t[24]=e("span",{class:"review-label"},"Member ID",-1)),e("span",Je,r(s.member_id),1)])):c("",!0),e("div",Ke,[t[25]||(t[25]=e("span",{class:"review-label"},"Settlement",-1)),e("span",Xe,r(s.settlement),1)]),s.phone?(l(),o("div",Qe,[t[26]||(t[26]=e("span",{class:"review-label"},"Phone",-1)),e("span",We,r(s.phone),1)])):c("",!0),s.email?(l(),o("div",Ze,[t[27]||(t[27]=e("span",{class:"review-label"},"Email",-1)),e("span",et,r(s.email),1)])):c("",!0),s.address?(l(),o("div",tt,[t[28]||(t[28]=e("span",{class:"review-label"},"Address",-1)),e("span",st,r(s.address),1)])):c("",!0)])]),e("div",it,[t[34]||(t[34]=e("h3",null,"Appeal Details",-1)),e("div",lt,[e("div",ot,[t[30]||(t[30]=e("span",{class:"review-label"},"Issue Type",-1)),e("span",at,r(s.issue_type),1)]),s.decision_date?(l(),o("div",nt,[t[31]||(t[31]=e("span",{class:"review-label"},"Decision Date",-1)),e("span",rt,r(s.decision_date),1)])):c("",!0),s.decision_maker?(l(),o("div",dt,[t[32]||(t[32]=e("span",{class:"review-label"},"Decision Maker",-1)),e("span",ut,r(s.decision_maker),1)])):c("",!0)]),e("div",pt,[t[33]||(t[33]=e("span",{class:"review-label"},"Description",-1)),e("span",ct,r(s.description),1)])]),m.value.length>0?(l(),o("div",mt,[e("h3",null,"Documents ("+r(m.value.length)+")",1),e("ul",_t,[(l(!0),o(f,null,h(m.value,(i,d)=>(l(),o("li",{key:d},r(i.name)+" ("+r(P(i.size))+") ",1))),128))])])):c("",!0),e("div",vt,[t[35]||(t[35]=e("h3",null,"Declarations",-1)),e("goa-form-item",{error:a.declaration_truthful},[e("goa-checkbox",{name:"declaration_truthful",checked:s.declaration_truthful,on_change:t[12]||(t[12]=i=>{s.declaration_truthful=i.detail.checked,a.declaration_truthful=""}),text:"I declare that the information provided is true and accurate to the best of my knowledge."},null,40,ht)],8,ft),e("goa-form-item",{error:a.declaration_deadlines},[e("goa-checkbox",{name:"declaration_deadlines",checked:s.declaration_deadlines,on_change:t[13]||(t[13]=i=>{s.declaration_deadlines=i.detail.checked,a.declaration_deadlines=""}),text:"I acknowledge the filing deadlines set by the Metis Settlements Act and understand that late filings may not be accepted."},null,40,yt)],8,gt)])],512),[[w,p.value===4]]),e("div",bt,[p.value>1?(l(),o("goa-button",{key:0,type:"secondary",on_click:R}," Previous ",32)):c("",!0),t[38]||(t[38]=e("div",{class:"spacer"},null,-1)),p.value<4?(l(),o("goa-button",{key:1,type:"primary",on_click:B}," Next ",32)):c("",!0),p.value===4?(l(),o("goa-button",{key:2,type:"primary",on_click:E,disabled:y.value},r(y.value?"Submitting...":"Submit Appeal"),41,wt)):c("",!0)])])]))]))}},Mt=U(kt,[["__scopeId","data-v-41b35685"]]);export{Mt as default};
//# sourceMappingURL=SubmitAppeal-iah1ap_E.js.map
