{"version":3,"file":"Login-lwwfQ9eq.js","sources":["../../src/views/Login.vue"],"sourcesContent":["<template>\n  <div class=\"login-page\">\n    <div class=\"login-container\">\n      <div class=\"login-header\">\n        <h1>Metis Settlements Appeal Tribunal</h1>\n        <p>Sign in to access the case management system</p>\n      </div>\n\n      <div class=\"login-card\">\n        <h2>Sign In</h2>\n\n        <div v-if=\"error\" class=\"error-banner\">\n          <goa-callout type=\"emergency\" heading=\"Sign in failed\">\n            {{ error }}\n          </goa-callout>\n        </div>\n\n        <form @submit.prevent=\"handleLogin\">\n          <goa-form-item label=\"Email\" :error=\"emailError\">\n            <goa-input\n              name=\"email\"\n              type=\"email\"\n              :value=\"email\"\n              placeholder=\"Enter your email\"\n              @_change=\"onEmailChange\"\n              width=\"100%\"\n            ></goa-input>\n          </goa-form-item>\n\n          <goa-form-item label=\"Password\" :error=\"passwordError\">\n            <goa-input\n              name=\"password\"\n              type=\"password\"\n              :value=\"password\"\n              placeholder=\"Enter your password\"\n              @_change=\"onPasswordChange\"\n              width=\"100%\"\n            ></goa-input>\n          </goa-form-item>\n\n          <div class=\"login-actions\">\n            <goa-button\n              type=\"primary\"\n              @_click=\"handleLogin\"\n              :disabled=\"loading\"\n              width=\"100%\"\n            >\n              {{ loading ? 'Signing in...' : 'Sign In' }}\n            </goa-button>\n          </div>\n        </form>\n\n        <div class=\"login-divider\">\n          <span>or</span>\n        </div>\n\n        <div class=\"sso-section\">\n          <goa-button\n            type=\"secondary\"\n            width=\"100%\"\n            @_click=\"handleSSO\"\n            :disabled=\"true\"\n          >\n            Sign in with Microsoft (Coming Soon)\n          </goa-button>\n        </div>\n\n        <div class=\"login-help\">\n          <p>Test credentials:</p>\n          <ul>\n            <li><strong>Admin:</strong> admin@msat.gov.ab.ca / admin123</li>\n            <li><strong>Staff:</strong> staff@msat.gov.ab.ca / staff123</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { login } from '@/services/auth.js';\n\nconst router = useRouter();\n\nconst email = ref('');\nconst password = ref('');\nconst error = ref('');\nconst emailError = ref('');\nconst passwordError = ref('');\nconst loading = ref(false);\n\nconst onEmailChange = (e) => {\n  email.value = e.detail.value;\n  emailError.value = '';\n};\n\nconst onPasswordChange = (e) => {\n  password.value = e.detail.value;\n  passwordError.value = '';\n};\n\nconst handleLogin = async () => {\n  // Validate\n  error.value = '';\n  emailError.value = '';\n  passwordError.value = '';\n\n  if (!email.value) {\n    emailError.value = 'Email is required';\n    return;\n  }\n  if (!password.value) {\n    passwordError.value = 'Password is required';\n    return;\n  }\n\n  loading.value = true;\n  try {\n    const response = await login(email.value, password.value);\n    if (response.success) {\n      // Redirect based on role\n      const role = response.user.role;\n      if (role === 'admin' || role === 'superadmin') {\n        router.push('/dashboard');\n      } else if (role === 'staff') {\n        router.push('/dashboard');\n      } else if (role === 'board_member') {\n        router.push('/dashboard');\n      } else {\n        router.push('/dashboard');\n      }\n    }\n  } catch (err) {\n    const msg = err.response?.data?.message || 'Sign in failed. Please try again.';\n    error.value = msg;\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst handleSSO = () => {\n  // Microsoft SSO - to be implemented when Entra ID credentials are provided\n};\n</script>\n\n<style scoped>\n.login-page {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 100vh;\n  background-color: var(--goa-color-greyscale-100, #f1f1f1);\n  padding: var(--goa-space-l);\n}\n\n.login-container {\n  width: 100%;\n  max-width: 460px;\n}\n\n.login-header {\n  text-align: center;\n  margin-bottom: var(--goa-space-l);\n}\n\n.login-header h1 {\n  font-size: var(--goa-font-size-7, 1.5rem);\n  color: var(--goa-color-text-default, #333);\n  margin-bottom: var(--goa-space-xs);\n}\n\n.login-header p {\n  color: var(--goa-color-text-secondary, #666);\n  font-size: var(--goa-font-size-4, 0.875rem);\n}\n\n.login-card {\n  background: white;\n  border-radius: var(--goa-border-radius-m, 4px);\n  padding: var(--goa-space-xl, 2rem);\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);\n}\n\n.login-card h2 {\n  font-size: var(--goa-font-size-6, 1.25rem);\n  margin-bottom: var(--goa-space-l);\n  text-align: center;\n}\n\n.error-banner {\n  margin-bottom: var(--goa-space-m);\n}\n\n.login-actions {\n  margin-top: var(--goa-space-l);\n}\n\n.login-divider {\n  display: flex;\n  align-items: center;\n  margin: var(--goa-space-l) 0;\n  color: var(--goa-color-text-secondary, #666);\n}\n\n.login-divider::before,\n.login-divider::after {\n  content: '';\n  flex: 1;\n  height: 1px;\n  background-color: var(--goa-color-greyscale-200, #dcdcdc);\n}\n\n.login-divider span {\n  padding: 0 var(--goa-space-m);\n  font-size: var(--goa-font-size-3, 0.8rem);\n}\n\n.login-help {\n  margin-top: var(--goa-space-l);\n  padding: var(--goa-space-m);\n  background-color: var(--goa-color-greyscale-100, #f1f1f1);\n  border-radius: var(--goa-border-radius-s, 2px);\n  font-size: var(--goa-font-size-3, 0.8rem);\n}\n\n.login-help p {\n  margin-bottom: var(--goa-space-xs);\n  font-weight: var(--goa-font-weight-bold, 700);\n}\n\n.login-help ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.login-help li {\n  padding: var(--goa-space-2xs) 0;\n}\n</style>\n"],"names":["router","useRouter","email","ref","password","error","emailError","passwordError","loading","onEmailChange","e","onPasswordChange","handleLogin","response","login","role","err","msg","_b","_a","handleSSO","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_cache","_hoisted_4","_hoisted_5","_toDisplayString","_hoisted_10","_hoisted_11","_hoisted_12"],"mappings":"uZAoFA,MAAMA,EAASC,EAAS,EAElBC,EAAQC,EAAI,EAAE,EACdC,EAAWD,EAAI,EAAE,EACjBE,EAAQF,EAAI,EAAE,EACdG,EAAaH,EAAI,EAAE,EACnBI,EAAgBJ,EAAI,EAAE,EACtBK,EAAUL,EAAI,EAAK,EAEnBM,EAAiBC,GAAM,CAC3BR,EAAM,MAAQQ,EAAE,OAAO,MACvBJ,EAAW,MAAQ,EACrB,EAEMK,EAAoBD,GAAM,CAC9BN,EAAS,MAAQM,EAAE,OAAO,MAC1BH,EAAc,MAAQ,EACxB,EAEMK,EAAc,SAAY,SAM9B,GAJAP,EAAM,MAAQ,GACdC,EAAW,MAAQ,GACnBC,EAAc,MAAQ,GAElB,CAACL,EAAM,MAAO,CAChBI,EAAW,MAAQ,oBACnB,MACF,CACA,GAAI,CAACF,EAAS,MAAO,CACnBG,EAAc,MAAQ,uBACtB,MACF,CAEAC,EAAQ,MAAQ,GAChB,GAAI,CACF,MAAMK,EAAW,MAAMC,EAAMZ,EAAM,MAAOE,EAAS,KAAK,EACxD,GAAIS,EAAS,QAAS,CAEpB,MAAME,EAAOF,EAAS,KAAK,KAEzBb,EAAO,KAAK,YAAY,CAQ5B,CACF,OAASgB,EAAK,CACZ,MAAMC,IAAMC,GAAAC,EAAAH,EAAI,WAAJ,YAAAG,EAAc,OAAd,YAAAD,EAAoB,UAAW,oCAC3Cb,EAAM,MAAQY,CAChB,QAAC,CACCT,EAAQ,MAAQ,EAClB,CACF,EAEMY,EAAY,IAAM,CAExB,gBA/IEC,EAAA,EAAAC,EA2EM,MA3ENC,EA2EM,CA1EJC,EAyEM,MAzENC,EAyEM,aAxEJD,EAGM,MAAA,CAHD,MAAM,gBAAc,CACvBA,EAA0C,UAAtC,mCAAiC,EACrCA,EAAmD,SAAhD,8CAA4C,QAGjDA,EAkEM,MAlENE,EAkEM,CAjEJC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAgB,UAAZ,UAAO,EAAA,GAEAnB,EAAA,OAAXgB,IAAAC,EAIM,MAJNM,EAIM,CAHJJ,EAEc,cAFdK,EAEcC,EADTzB,EAAA,KAAK,EAAA,CAAA,cAIZmB,EAiCO,OAAA,CAjCA,WAAgBZ,EAAW,CAAA,SAAA,CAAA,IAChCY,EASgB,gBAAA,CATD,MAAM,QAAS,MAAOlB,EAAA,QACnCkB,EAOa,YAAA,CANX,KAAK,QACL,KAAK,QACJ,MAAOtB,EAAA,MACR,YAAY,mBACX,UAASO,EACV,MAAM,yBAIVe,EASgB,gBAAA,CATD,MAAM,WAAY,MAAOjB,EAAA,QACtCiB,EAOa,YAAA,CANX,KAAK,WACL,KAAK,WACJ,MAAOpB,EAAA,MACR,YAAY,sBACX,UAASO,EACV,MAAM,yBAIVa,EASM,MATNO,EASM,CARJP,EAOa,aAAA,CANX,KAAK,UACJ,SAAQZ,EACR,SAAUJ,EAAA,MACX,MAAM,UAEHA,EAAA,MAAO,gBAAA,SAAA,EAAA,GAAAwB,CAAA,qBAKhBR,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAAe,YAAT,IAAE,QAGVA,EASM,MATNS,EASM,CARJT,EAOa,aAAA,CANX,KAAK,YACL,MAAM,OACL,SAAQJ,EACR,SAAU,IACZ,yCAED,EAAA,gBAGFI,EAMM,MAAA,CAND,MAAM,cAAY,CACrBA,EAAwB,SAArB,mBAAiB,EACpBA,EAGK,KAAA,KAAA,CAFHA,EAAgE,KAAA,KAAA,CAA5DA,EAAuB,cAAf,QAAM,IAAS,kCAAgC,IAC3DA,EAAgE,KAAA,KAAA,CAA5DA,EAAuB,cAAf,QAAM,IAAS,kCAAgC"}